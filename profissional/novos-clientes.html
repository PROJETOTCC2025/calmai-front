<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Novos Clientes - Calma Aí</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link rel="stylesheet" href="../estilosGerais/menu-superior.css">
  <link rel="stylesheet" href="../estilosGerais/header.css">
</head>

<body>

  <header>
    <h1>CalmaAí</h1>
  </header>

  <!-- MENU -->
  <nav class="menu-app">
    <a href="profissionalindex.html" class="menu-item">
      <i class="fa-solid fa-house"></i>
      <span>Início</span>
    </a>

    <a href="novos-clientes.html" class="menu-item ativo">
      <i class="fa-solid fa-user-plus"></i>
      <span>Novos Clientes</span>
    </a>

    <a href="meus-pacientes.html" class="menu-item">
      <i class="fa-solid fa-users"></i>
      <span>Meus Pacientes</span>
    </a>

    <a href="../financeiro/financeiro.html" class="menu-item">
      <i class="fa-solid fa-wallet"></i>
      <span>Financeiro</span>
    </a>

  </nav>

  <main>
    <h1 class="titulo">Novos Clientes</h1>
    <div class="section">
      <table class="clientes-tabela" id="novosClientes">
        <tr>
          <th>Nome</th>
          <th>Idade</th>
          <th>Objetivo</th>
          <th>Ações</th>
        </tr>
      </table>
    </div>
  </main>

  <script>

    let pacientes = [
      {
        nome: 'Joana Silva',
        idade: 9,
        ultimaSessao: "N/A",
        proximaSessao: "A definir",
        objetivo: "Reduzir ansiedade"
      },
      {
        nome: 'Pedro Andrade',
        idade: 25,
        ultimaSessao: "N/A",
        proximaSessao: "A definir",
        objetivo: "TOC"
      },
      {
        nome: 'Mariana Costa',
        idade: 74,
        ultimaSessao: "N/A",
        proximaSessao: "A definir",
        objetivo: "TAG"
      },
      {
        nome: 'Ricardo Souza',
        idade: 53,
        ultimaSessao: "N/A",
        proximaSessao: "A definir",
        objetivo: "Bournout"
      },
    ];

    function recusar(nome) {
      alert(nome + ' com atendimento recusado!')
      pacientes = pacientes.filter(paciente => paciente.nome != nome)
      carregarTabela()
    }

    function carregarTabela() {
      const tabelaPacientes = document.getElementById('novosClientes');
      tabelaPacientes.innerHTML = ''

      for (let paciente of pacientes) {
        const novaLinha = `
          <tr>
            <td>${paciente.nome}</td>
            <td>${paciente.idade}</td>
            <td>${paciente.objetivo}</td>
            <td>
              <button class="btn-aceitar">Aceitar</button>
              <button class="btn-recusar" onclick="recusar('${paciente.nome}')">Recusar</button>
            </td> 
          </tr>
        `
        tabelaPacientes.innerHTML += novaLinha;
      }
    }

    carregarTabela()

  </script>
</body>

</html>